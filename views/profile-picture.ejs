<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <link rel="stylesheet" href="../styles/profile-picture.css" />
    <title>GatePass - Profile Picture</title>
</head>
<body onload="load()">
  
    <div class="container">



        <div class="card">
            

            <form action="/profile-upload" method="post">

            <h3>Upload Profile Picture</h3>
            <p>Please select a clear image of yours for identification purpose. This image will be used to validate your passes</p>
            <input type="hidden" name="image_id" value="">
            
            </form>
           
            <button id="upload_widget" class="cloudinary-button" style="background-color: black; 
                padding: 40px; font-size: 40px; border-radius: 10px;
                
                ">Please wait...</button>

                

                <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>  
                
                <script type="text/javascript">
                
                var btn  =  document.getElementById('upload_widget')

                var myWidget = cloudinary.createUploadWidget({
                  cloudName: 'mydatabase112233', 
                  uploadPreset: 'ms8glhvn'}, (error, result) => { 
                    if (!error && result && result.event === "success") { 
                        
                      console.log('Done! Here is the image info: ', result.info.path); 
                      btn.innerText = 'Uploading...'
                      document.getElementsByName('image_id')[0].value = result.info.path
                      document.getElementsByTagName('form')[0].submit()
                    }
                  }
                )
                
                document.getElementById("upload_widget").addEventListener("click", function(){
                    myWidget.open();
                  }, false);

                  function load(){
                   
                      btn.innerText = 'Upload image'
                      
                  }
                </script>

        </div>



    </div>

    <script>
        var file_area = document.getElementsByClassName('file-area')[0]

        file_area.addEventListener('click' , ()=>{
            document.getElementById('file').click()
        })

        function showType(fileInput) {
    const files = fileInput.files;
   
    if(files.length == 1){
     
    const name = files[0].name;
    const type = files[0].type;
    file_area.innerText = 'Selected file: '+ name;
    document.getElementById('submit-btn').style.display = 'block';
    }

    else{
        file_area.innerText ='Please select only one image file';
    }
         
     }
    </script>

</body>
</html>